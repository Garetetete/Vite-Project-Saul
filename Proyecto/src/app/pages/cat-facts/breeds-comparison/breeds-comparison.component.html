<div class="container py-5">
  <div class="text-center mb-5">
    <h1 class="display-4 fw-bold text-primary mb-3">
      <i class="bi bi-arrows-angle-contract me-2"></i>
      {{ t.comparisonTitle }}
    </h1>
    <p class="lead text-muted">
      {{ t.comparisonSubtitle }}
    </p>
  </div>

  @if (loading()) {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
        <span class="visually-hidden">{{ t.loading }}...</span>
      </div>
      <p class="mt-3 text-muted">{{ t.loadingBreeds }}</p>
    </div>
  } @else if (error()) {
    <div class="alert alert-danger" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      {{ error() }}
    </div>
  } @else {
    <!-- Filtro por país -->
    <div class="row mb-4">
      <div class="col-md-6 mx-auto">
        <div class="card shadow-sm border-0 bg-warning bg-opacity-10">
          <div class="card-body">
            <label class="form-label fw-bold text-warning">
              <i class="bi bi-funnel-fill me-2"></i>
              {{ t.filterByCountry }}
            </label>
            <select 
              class="form-select form-select-lg"
              [(ngModel)]="countryFilter"
              (ngModelChange)="onCountryFilterChange()"
              [disabled]="loading()">
              @for (country of uniqueCountries(); track country) {
                <option [value]="country">{{ country }}</option>
              }
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Selectores -->
    <div class="row g-4 mb-5">
      <div class="col-md-6">
        <div class="card shadow-sm border-0 bg-primary bg-opacity-10">
          <div class="card-body">
            <label class="form-label fw-bold text-primary">
              <i class="bi bi-1-circle-fill me-2"></i>
              {{ t.selectBreed }} 1
            </label>
            <select 
              class="form-select form-select-lg"
              [(ngModel)]="selectedBreedLeft"
              [disabled]="loading()">
              @for (breed of filteredBreeds(); track breed.breed) {
                <option [value]="breed.breed">{{ breed.breed }}</option>
              }
            </select>
          </div>
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="card shadow-sm border-0 bg-success bg-opacity-10">
          <div class="card-body">
            <label class="form-label fw-bold text-success">
              <i class="bi bi-2-circle-fill me-2"></i>
              {{ t.selectBreed }} 2
            </label>
            <select 
              class="form-select form-select-lg"
              [(ngModel)]="selectedBreedRight"
              [disabled]="loading()">
              @for (breed of filteredBreeds(); track breed.breed) {
                <option [value]="breed.breed">{{ breed.breed }}</option>
              }
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Comparación -->
    @if (showComparison()) {
      <div class="comparison-vs text-center mb-4">
        <span class="badge bg-dark fs-3 px-4 py-3 shadow">VS</span>
      </div>

      <div class="row g-4">
        <!-- Columna Izquierda -->
        <div class="col-md-6">
          <div class="breed-card left-breed">
            <div class="breed-card-header">
              <h2 class="breed-name">
                <i class="bi bi-award-fill me-2"></i>
                {{ breedLeft()?.breed }}
              </h2>
            </div>
            
            <!-- Imagen del gato -->
            @if (catImageLeft()) {
              <div class="breed-image-container">
                <img 
                  [src]="catImageLeft()" 
                  alt="{{ breedLeft()?.breed }}" 
                  class="breed-image">
              </div>
            }
            
            <div class="breed-card-body">
              <!-- País -->
              <div class="comparison-item" [class.match]="compareField('country') === 'same'">
                <div class="item-label">
                  <i class="bi bi-geo-alt-fill"></i>
                  {{ t.country }}
                </div>
                <div class="item-value">{{ breedLeft()?.country }}</div>
                @if (compareField('country') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>

              <!-- Origen -->
              <div class="comparison-item" [class.match]="compareField('origin') === 'same'">
                <div class="item-label">
                  <i class="bi bi-compass-fill"></i>
                  {{ t.origin }}
                </div>
                <div class="item-value">{{ breedLeft()?.origin }}</div>
                @if (compareField('origin') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>

              <!-- Pelaje -->
              <div class="comparison-item" [class.match]="compareField('coat') === 'same'">
                <div class="item-label">
                  <i class="bi bi-star-fill"></i>
                  {{ t.coat }}
                </div>
                <div class="item-value">{{ breedLeft()?.coat }}</div>
                @if (compareField('coat') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>

              <!-- Patrón -->
              <div class="comparison-item" [class.match]="compareField('pattern') === 'same'">
                <div class="item-label">
                  <i class="bi bi-palette-fill"></i>
                  {{ t.pattern }}
                </div>
                <div class="item-value">{{ breedLeft()?.pattern }}</div>
                @if (compareField('pattern') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>
            </div>
          </div>
        </div>

        <!-- Columna Derecha -->
        <div class="col-md-6">
          <div class="breed-card right-breed">
            <div class="breed-card-header">
              <h2 class="breed-name">
                <i class="bi bi-award-fill me-2"></i>
                {{ breedRight()?.breed }}
              </h2>
            </div>
            
            <!-- Imagen del gato -->
            @if (catImageRight()) {
              <div class="breed-image-container">
                <img 
                  [src]="catImageRight()" 
                  alt="{{ breedRight()?.breed }}" 
                  class="breed-image">
              </div>
            }
            
            <div class="breed-card-body">
              <!-- País -->
              <div class="comparison-item" [class.match]="compareField('country') === 'same'">
                <div class="item-label">
                  <i class="bi bi-geo-alt-fill"></i>
                  {{ t.country }}
                </div>
                <div class="item-value">{{ breedRight()?.country }}</div>
                @if (compareField('country') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>

              <!-- Origen -->
              <div class="comparison-item" [class.match]="compareField('origin') === 'same'">
                <div class="item-label">
                  <i class="bi bi-compass-fill"></i>
                  {{ t.origin }}
                </div>
                <div class="item-value">{{ breedRight()?.origin }}</div>
                @if (compareField('origin') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>

              <!-- Pelaje -->
              <div class="comparison-item" [class.match]="compareField('coat') === 'same'">
                <div class="item-label">
                  <i class="bi bi-star-fill"></i>
                  {{ t.coat }}
                </div>
                <div class="item-value">{{ breedRight()?.coat }}</div>
                @if (compareField('coat') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>

              <!-- Patrón -->
              <div class="comparison-item" [class.match]="compareField('pattern') === 'same'">
                <div class="item-label">
                  <i class="bi bi-palette-fill"></i>
                  {{ t.pattern }}
                </div>
                <div class="item-value">{{ breedRight()?.pattern }}</div>
                @if (compareField('pattern') === 'same') {
                  <i class="bi bi-check-circle-fill text-success match-icon"></i>
                }
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Info adicional -->
      <div class="text-center mt-4">
        <div class="card bg-light border-0">
          <div class="card-body">
            <p class="mb-0 text-muted">
              <i class="bi bi-info-circle me-2"></i>
              {{ t.comparisonInfo }}
            </p>
          </div>
        </div>
      </div>
    }
  }
</div>

